from pycallgraph import PyCallGraph
from pycallgraph.output import GraphvizOutput


def extended_gcd(a, b):
    if b == 0:
        return a, 1, 0
    else:
        gcd, xtmp, ytmp = extended_gcd(b, a % b)
        x = ytmp
        y = xtmp - int(a // b) * ytmp
        return gcd, x, y


def main():
    a = eval(input("Please input the value of a: "))
    b = eval(input("Please input the value of b: "))


    flag = 0  # 标记a和b是否有负数
    if (a > 0 and b < 0) or (a < 0 and b > 0):
        flag = 1

    # a = 7
    # b = 5
    # a = 7
    # b = -13
    # a = 24
    # b = 36
    # a = 2461502723515673086658704256944912426065172925575
    # b = 1720876577542770214811199308823476528929542231719
    # a = 13709616469144948883512229123502305176385931810284088906755090238431898972708904439178898468021710798401875986657125211084472621499595371254346390738382042
    # b = 19235039994987625167590963480899777255933775238312044097122773255647530276806317636026727679800825370459321617724871515442147432420951257037823141069640181
    # a = 96557807278640299121519463045206377934978887298086994211590515571717325955785923783159432436307870512742354877476790046891802153053719263845602618422474671707896136814707875793300040916757228826108499490311295942553478010913043680523612655400526255290702983490382191419067057726624348815391509161304477322782
    # b = 146116799305702219220540123503890666704710410600856387071776221592477256752759997798169931809156426471243799795374072510423645363680537337813774268658907130969994146783451692837222772144941434909050652825715582967684984814095461041109999161468223272534833391335036612863782740784573110824091866969655931097032

    graphviz = GraphvizOutput()
    graphviz.output_file = 'exEuclid.png'
    with PyCallGraph(output=graphviz):
        ans = extended_gcd(a, b)
        gcd = ans[0]
        x = ans[1]
        y = ans[2]
        if flag == 0:
            print("The answer is:\nx={1}\ny={3}\n(x,y)={0}\n{0} = {1} * {2} + {3} * {4}".format(gcd, x, a, y, b))
        elif flag == 1:
            print("The answer is:\nx={1}\ny={3}\n(x,y)={0}\n{0} = {1} * {2} + {3} * {4}".format(-gcd, -x, a, -y, b))


if __name__ == '__main__':
    main()
