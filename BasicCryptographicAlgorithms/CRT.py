from pycallgraph import PyCallGraph
from pycallgraph.output import GraphvizOutput


def multi_inverse(a, b):  # extended_gcd求逆元
    if b == 0:
        return a, 1, 0
    else:
        gcd, xtmp, ytmp = multi_inverse(b, a % b)
        x = ytmp
        y = xtmp - int(a // b) * ytmp
        return gcd, x, y


def crt(a1, a2, a3, b1, b2, b3):
    p = a1 * a2 * a3

    # 求逆元
    tmp1, e1, tmp2 = multi_inverse(p // a1, a1)
    tmp1, e2, tmp2 = multi_inverse(p // a2, a2)
    tmp1, e3, tmp2 = multi_inverse(p // a3, a3)
    print(p, e1, e2, e3)
    ans = ((((p // a1) % p) * (e1 % p) * (b1 % p)) % p + (((p // a2) % p) * (e2 % p) * (b2 % p)) % p + (
                ((p // a3) % p) * (e3 % p) * (b3 % p)) % p) % p

    return ans


def main():
    # num = 3
    # x%ai=bi
    a1, a2, a3 = map(int, input("请输入用逗号分隔的模数:").split(","))  # 输入用逗号分隔的模数
    b1, b2, b3 = map(int, input("请输入用逗号分隔的余数:").split(","))  # 输入用逗号分隔的余数

    # a1, a2, a3 = 23,28,33
    # b1, b2, b3 = 0,0,0
    # a1, a2, a3 = 23,28,33
    # b1, b2, b3 = 5,20,34
    # a1, a2, a3 = 23,28,33
    # b1, b2, b3 = 283,102,23
    # a1, a2, a3 = 489808178709479466279507878773770708214878979673,896234965496726578561614071442814700467907036641,1213827005758305602466882992172310409456053868843
    # b1, b2, b3 = 802310684485241212312289432691586430708135062249,961714109955647014172499578071923389425123540027,1381194006087304024683552712488022595194097928701
    # a1, a2, a3 = 13392316081651420877308875276166772808601812122052371442339078877740399569281672683820206196320955005869072002883847646526584107260355414977120453263391947,9734466939658282823343760206593283968765904848250021580218634383869090913086348857668999272399075016287736914000854272239315769632719896968098820774563511,9460200357790728398862913232664036038694521858415765931064505193755202156521446156499075450033429983317127589636591133111239548821251790171694322930011927
    # b1, b2, b3 = 8157969540288411637818433039558323184074779086100165504668538221920170369774913261335059602331627321130656458962980224196880533337839226059601303464776145,9699616044315021194953572561076502992783130623216574220426043600142343504101508838526221359049417564415801914072315788919275792502477693022853881785198116,7832693802256371667866514213119452199821916193668106904135812283217637737600922381702016472708855675649121271702977408217814917908566132517503707494037556


    graphviz = GraphvizOutput()
    graphviz.output_file = 'crt.png'
    with PyCallGraph(output=graphviz):
        print("ans =", crt(a1, a2, a3, b1, b2, b3))


if __name__ == '__main__':
    main()
